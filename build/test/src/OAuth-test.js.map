{"version":3,"sources":["src/OAuth-test.js"],"names":[],"mappings":"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","file":"src/OAuth-test.js","sourcesContent":["/* global describe, it */\nvar when = require('when');\nvar delay = require('when/delay');\nvar chai = require('chai');\nvar chaiAsPromised = require('chai-as-promised');\nchai.use(chaiAsPromised);\nvar expect = chai.expect;\n\nvar tsi = require('./testServerInstance');\nvar util = require('./util');\nvar config = require('../config');\n\nimport OAuth, {TOKEN} from '../../src/OAuth';\nvar Throttle = require('../../src/Throttle');\nvar Request = require('../../src/Request');\n\ndescribe(__filename, function (require) {\n\n  this.timeout(config.testTimeout);\n\n  var throttle = new Throttle(1000);\n  var request = new Request(throttle);\n\n  describe('normalizeScope()', function() {\n    it('should convert an array of scopes into a CSV string', function() {\n      var userConfig = util.getExplicitUserConfig([ 'flair', 'foobar' ]);\n      var oauth = new OAuth(userConfig, request);\n      expect(oauth.scope).to.equal('flair,foobar');\n    });\n  });\n\n  describe('hasRefreshToken()', function() {\n    it('should not have a refresh token starting out', function() {\n      var userConfig = util.getExplicitUserConfig([ 'flair', 'foobar' ]);\n      var oauth = new OAuth(userConfig, request);\n      expect(oauth.hasRefreshToken()).to.equal(false);\n    });\n\n    // Checking that it gets set / unset takes place in other tests\n    // properly in authentication / deauthentication\n  });\n\n  describe('isAuthenticated()', function() {\n    it('should not be authenticated initially', function() {\n      var userConfig = util.getExplicitUserConfig([ 'flair', 'foobar' ]);\n      var oauth = new OAuth(userConfig, request);\n      expect(oauth.isAuthenticated()).to.equal(false);\n    });\n\n    // Checking that this changes / is properly updated gets tested in\n    // other places\n  });\n\n  describe('getAuthorizationHeader()', function() {\n    it('should initially be set to invalid token', function() {\n      var userConfig = util.getExplicitUserConfig([ 'flair', 'foobar' ]);\n      var oauth = new OAuth(userConfig, request);\n      expect(oauth.getAuthorizationHeader()).to.equal(\n        'bearer ' + TOKEN.INVALID);\n    });\n  });\n\n  describe('getExplicitAuthUrl()', function() {\n    it('should get a proper authorization url (WEB/INSTALLED)', function() {\n      var userConfig = util.getExplicitUserConfig([ 'identity' ]);\n      var oauth = new OAuth(userConfig, request);\n      var url = oauth.getExplicitAuthUrl('foo');\n\n      expect(url.indexOf('https://www.reddit.com/api/v1/authorize?')).to.not.equal(-1);\n      expect(url.indexOf('client_id=' + config.reddit.web.key)).to.not.equal(-1);\n      expect(url.indexOf('state=foo')).to.not.equal(-1);\n      expect(url.indexOf('redirect_uri=' + encodeURIComponent(config.reddit.redirectUri))).to.not.equal(-1);\n      expect(url.indexOf('duration=temporary')).to.not.equal(-1);\n      expect(url.indexOf('response_type=code')).to.not.equal(-1);\n      expect(url.indexOf('scope=identity')).to.not.equal(-1);\n    });\n\n    it('should get a proper authorization url (mobile friendly) (WEB/INSTALLED)', function() {\n      var userConfig = util.getExplicitUserConfig([ 'identity' ], void 0, true);\n      var oauth = new OAuth(userConfig, request);\n      var url = oauth.getExplicitAuthUrl('foo');\n\n      expect(url.indexOf('https://www.reddit.com/api/v1/authorize.compact?')).to.not.equal(-1);\n      expect(url.indexOf('client_id=' + config.reddit.web.key)).to.not.equal(-1);\n      expect(url.indexOf('state=foo')).to.not.equal(-1);\n      expect(url.indexOf('redirect_uri=' + encodeURIComponent(config.reddit.redirectUri))).to.not.equal(-1);\n      expect(url.indexOf('duration=temporary')).to.not.equal(-1);\n      expect(url.indexOf('response_type=code')).to.not.equal(-1);\n      expect(url.indexOf('scope=identity')).to.not.equal(-1);\n    });\n\n    it('should get back a proper authorization url (multiple scopes) (WEB/INSTALLED)', function() {\n      var userConfig = util.getExplicitUserConfig([\n        'identity',\n        'read',\n        'subscribe'\n      ]);\n      var oauth = new OAuth(userConfig, request);\n      var url = oauth.getExplicitAuthUrl('foo');\n\n      expect(url.indexOf('https://www.reddit.com/api/v1/authorize?')).to.not.equal(-1);\n      expect(url.indexOf('client_id=' + config.reddit.web.key)).to.not.equal(-1);\n      expect(url.indexOf('state=foo')).to.not.equal(-1);\n      expect(url.indexOf('redirect_uri=' + encodeURIComponent(config.reddit.redirectUri))).to.not.equal(-1);\n      expect(url.indexOf('duration=temporary')).to.not.equal(-1);\n      expect(url.indexOf('response_type=code')).to.not.equal(-1);\n      expect(url.indexOf('scope=' + encodeURIComponent('identity,read,subscribe'))).to.not.equal(-1);\n    });\n\n  });\n\n  describe('getImplicitAuthUrl()', function() {\n    it('should get back an implicit grant authorization url', function() {\n\n      var userConfig = util.getImplicitUserConfig([ 'identity' ]);\n      var oauth = new OAuth(userConfig, request);\n      var url = oauth.getImplicitAuthUrl('foo');\n\n      expect(url.indexOf('https://www.reddit.com/api/v1/authorize?')).to.not.equal(-1);\n      expect(url.indexOf('client_id=' + config.reddit.installed.key)).to.not.equal(-1);\n      expect(url.indexOf('state=foo')).to.not.equal(-1);\n      expect(url.indexOf('redirect_uri=' + encodeURIComponent(config.reddit.redirectUri))).to.not.equal(-1);\n      expect(url.indexOf('response_type=token')).to.not.equal(-1);\n      expect(url.indexOf('scope=' + encodeURIComponent('identity'))).to.not.equal(-1);\n    });\n  });\n\n  describe('getAuthUrl()', function() {\n\n    it('should get the explicit auth url', function() {\n      var userConfig = util.getExplicitUserConfig([ 'identity' ]);\n      var oauth = new OAuth(userConfig, request);\n\n      // EXPLICIT\n      var url = oauth.getAuthUrl('foo');\n\n      expect(url.indexOf('https://www.reddit.com/api/v1/authorize?')).to.not.equal(-1);\n      expect(url.indexOf('client_id=' + config.reddit.web.key)).to.not.equal(-1);\n      expect(url.indexOf('state=foo')).to.not.equal(-1);\n      expect(url.indexOf('redirect_uri=' + encodeURIComponent(config.reddit.redirectUri))).to.not.equal(-1);\n      expect(url.indexOf('duration=temporary')).to.not.equal(-1);\n      expect(url.indexOf('response_type=code')).to.not.equal(-1);\n      expect(url.indexOf('scope=identity')).to.not.equal(-1);\n    });\n\n    it('should get the implicit auth url', function() {\n      var userConfig = util.getImplicitUserConfig([ 'identity' ]);\n      var oauth = new OAuth(userConfig, request);\n\n      // IMPLICIT\n      var url = oauth.getAuthUrl('foo');\n\n      expect(url.indexOf('https://www.reddit.com/api/v1/authorize?')).to.not.equal(-1);\n      expect(url.indexOf('client_id=' + config.reddit.installed.key)).to.not.equal(-1);\n      expect(url.indexOf('state=foo')).to.not.equal(-1);\n      expect(url.indexOf('redirect_uri=' + encodeURIComponent(config.reddit.redirectUri))).to.not.equal(-1);\n      expect(url.indexOf('response_type=token')).to.not.equal(-1);\n      expect(url.indexOf('scope=' + encodeURIComponent('identity'))).to.not.equal(-1);\n    });\n  });\n\n\n  describe('getAppOnlyTokenData()', function() {\n    it('get the correct data for script / explicit', function() {\n      var userConfig = util.getExplicitUserConfig([ 'identity' ]);\n      var oauth = new OAuth(userConfig, request);\n\n      expect(oauth.getAppOnlyTokenData()).to.eql({\n        scope: 'identity',\n        grant_type: 'client_credentials'\n      });\n    });\n\n    it('get the correct data for implicit', function() {\n      var userConfig = util.getImplicitUserConfig([ 'identity' ]);\n      var oauth = new OAuth(userConfig, request);\n\n      expect(oauth.getAppOnlyTokenData()).to.eql({\n        scope: 'identity',\n        grant_type: 'https://oauth.reddit.com/grants/installed_client',\n        device_id: 'DO_NOT_TRACK_THIS_DEVICE'\n      });\n    });\n  });\n\n  describe('getAuthenticatedTokenData()', function() {\n    it('should get the correct data for script', function() {\n      var userConfig = util.getScriptUserConfig([ 'identity' ]);\n      var oauth = new OAuth(userConfig, request);\n\n      expect(oauth.getAuthenticatedTokenData()).to.eql({\n        scope: 'identity',\n        grant_type: 'password',\n        username: config.reddit.login.username,\n        password: config.reddit.login.password\n      });\n    });\n\n    it('should get the correct data for explicit', function() {\n      var userConfig = util.getExplicitUserConfig([ 'identity' ]);\n      var oauth = new OAuth(userConfig, request);\n\n      expect(oauth.getAuthenticatedTokenData('some_auth_code')).to.eql({\n        scope: 'identity',\n        grant_type: 'authorization_code',\n        client_id: config.reddit.web.key,\n        redirect_uri: config.reddit.redirectUri,\n        code: 'some_auth_code'\n      });\n    });\n\n  });\n\n  describe('getRefreshTokenData()', function() {\n    it('should get the correct data for a refresh token', function() {\n      var userConfig = util.getExplicitUserConfig([ 'identity' ]);\n      var oauth = new OAuth(userConfig, request);\n\n      expect(oauth.getRefreshTokenData('a_refresh_token')).to.eql({\n        scope: 'identity',\n        grant_type: 'refresh_token',\n        refresh_token: 'a_refresh_token'\n      });\n    });\n  });\n\n  describe('getToken()', function() {\n\n    it('(Explicit) it should get an access token', function() {\n\n      var userConfig = util.getExplicitUserConfig([ 'identity' ]);\n      var oauth = new OAuth(userConfig, request);\n      var url = oauth.getAuthUrl('foo');\n\n      return tsi.standardServer.allowAuthUrl(url).then(function(params) {\n\n        if (params.error) { throw new Error(params.error); }\n\n        expect(params.state).to.equal('foo');\n        expect(params.code).to.be.a('string');\n\n        var authorizationCode = params.code;\n\n        return oauth.getToken(TOKEN.EXPLICIT, {\n          authorizationCode: authorizationCode,\n        });\n      }).then(function(authData) {\n        expect(authData).to.be.an('object');\n        if (authData.error) { throw new Error(authData.error); }\n\n        expect(authData.access_token).to.be.a('string');\n        expect(authData.token_type).to.equal('bearer');\n        expect(authData.expires_in).to.equal(3600);\n        expect(authData.scope).to.equal('identity');\n      });\n    });\n\n    it('(Script) should get an access token', function() {\n\n      var userConfig = util.getScriptUserConfig();\n      var oauth = new OAuth(userConfig, request);\n\n      return oauth.getToken(TOKEN.SCRIPT).then(function(authData) {\n        expect(authData).to.be.an('object');\n\n        if (authData.error) { throw new Error(authData.error); }\n\n        expect(authData.access_token).to.be.a('string');\n        expect(authData.token_type).to.equal('bearer');\n        expect(authData.expires_in).to.equal(3600);\n        expect(authData.scope).to.equal('*');\n      });\n    });\n\n    it('(Script + 1 scope) should get an access token', function() {\n\n      var userConfig = util.getScriptUserConfig([ 'flair' ]);\n      var oauth = new OAuth(userConfig, request);\n\n      return oauth.getToken(TOKEN.SCRIPT).then(function(authData) {\n        expect(authData).to.be.an('object');\n\n        if (authData.error) { throw new Error(authData.error); }\n\n        expect(authData.access_token).to.be.a('string');\n        expect(authData.token_type).to.equal('bearer');\n        expect(authData.expires_in).to.equal(3600);\n        expect(authData.scope).to.equal('flair');\n      });\n    });\n\n    it('(Script + multiple scopes) should get an access token', function() {\n      var userConfig = util.getScriptUserConfig([ 'flair', 'identity' ]);\n      var oauth = new OAuth(userConfig, request);\n\n      return oauth.getToken(TOKEN.SCRIPT).then(function(authData) {\n        expect(authData).to.be.an('object');\n\n        if (authData.error) { throw new Error(authData.error); }\n\n        expect(authData.access_token).to.be.a('string');\n        expect(authData.token_type).to.equal('bearer');\n        expect(authData.expires_in).to.equal(3600);\n        expect(authData.scope).to.equal('flair identity');\n      });\n    });\n\n    it('(Application only implicit) should get Application only access token', function() {\n      var userConfig = util.getImplicitUserConfig();\n      var oauth = new OAuth(userConfig, request);\n\n      return oauth.getToken(TOKEN.APP_ONLY).then(function(authData) {\n        expect(authData).to.be.an('object');\n\n        if (authData.error) { throw new Error(authData.error); }\n\n        expect(authData.access_token).to.be.a('string');\n        expect(authData.token_type).to.equal('bearer');\n        expect(authData.expires_in).to.equal(3600);\n        expect(authData.scope).to.equal('*');\n      });\n    });\n\n    it('(Application only script/web) should get Application only access token', function() {\n\n      var userConfig = util.getScriptUserConfig();\n      var oauth = new OAuth(userConfig, request);\n\n      return oauth.getToken(TOKEN.APP_ONLY).then(function(authData) {\n        expect(authData).to.be.an('object');\n\n        if (authData.error) { throw new Error(authData.error); }\n\n        expect(authData.access_token).to.be.a('string');\n        expect(authData.token_type).to.equal('bearer');\n        expect(authData.expires_in).to.equal(3600);\n        expect(authData.scope).to.equal('*');\n      });\n    });\n\n  });\n\n  describe('auth()', function() {\n\n    it('application only auth (explicit/script)', function() {\n      var userConfig = util.getScriptUserConfig();\n      var oauth = new OAuth(userConfig, request);\n\n      return oauth.auth(void 0, true).then(function(authData) {\n        expect(oauth.isAuthenticated()).to.equal(true);\n      });\n    });\n\n    it('script oauth', function() {\n      var userConfig = util.getScriptUserConfig();\n      var oauth = new OAuth(userConfig, request);\n\n      return oauth.auth().then(function() {\n        expect(oauth.isAuthenticated()).to.equal(true);\n      });\n    });\n\n    it('explicit oauth (duration temporary)', function() {\n      var userConfig = util.getExplicitUserConfig([ 'identity' ]);\n      var oauth = new OAuth(userConfig, request);\n      var url = oauth.getAuthUrl('foo');\n\n      return tsi.standardServer.allowAuthUrl(url).then(function(params) {\n        if (params.error) { throw new Error(params.error); }\n        expect(params.state).to.equal('foo');\n        expect(params.code).to.be.a('string');\n        var authorizationCode = params.code;\n        return oauth.auth(authorizationCode);\n\n      }).then(function(refreshToken) {\n        expect(typeof refreshToken).to.equal('undefined');\n        expect(oauth.isAuthenticated()).to.equal(true);\n        expect(oauth.hasRefreshToken()).to.equal(false);\n      });\n    });\n\n    it('explicit oauth (duration permanent)', function() {\n      var userConfig = util.getExplicitUserConfig([ 'identity' ], 'permanent');\n      var oauth = new OAuth(userConfig, request);\n      var url = oauth.getAuthUrl('foo');\n\n      return tsi.standardServer.allowAuthUrl(url).then(function(params) {\n        if (params.error) { throw new Error(params.error); }\n        var authorizationCode = params.code;\n        return oauth.auth(authorizationCode);\n      }).then(function(refreshToken) {\n        expect(typeof refreshToken).to.equal('string');\n        expect(oauth.isAuthenticated()).to.equal(true);\n        expect(oauth.hasRefreshToken()).to.equal(true);\n      });\n    });\n\n    it('implicit oauth', function() {\n      var userConfig = util.getImplicitUserConfig([ 'identity' ]);\n      var oauth = new OAuth(userConfig, request);\n      var url = oauth.getAuthUrl('foo');\n\n      return tsi.standardServer.allowAuthUrl(url).then(function(params) {\n        if (params.error) { throw new Error(params.error); }\n        var accessToken = params['access_token'];\n        return oauth.auth(accessToken);\n      }).then(function() {\n        expect(oauth.isAuthenticated()).to.equal(true);\n        expect(oauth.hasRefreshToken()).to.equal(false);\n      });\n    });\n\n  });\n\n  describe('applicationOnlyOAuth()', function() {\n    it('application only auth (script)', function() {\n      var userConfig = util.getScriptUserConfig();\n      var oauth = new OAuth(userConfig, request);\n      return oauth.applicationOnlyAuth().then(function(authData) {\n        expect(oauth.isAuthenticated()).to.equal(true);\n      });\n    });\n  });\n\n  describe('refresh()', function() {\n    it('should not refresh', function(done) {\n      var userConfig = util.getExplicitUserConfig([ 'identity' ], 'permanent');\n      var oauth = new OAuth(userConfig, request);\n      var url = oauth.getAuthUrl('foo');\n\n      return oauth.refresh().then(function() {\n        done(new Error('should not get here & should fail'));\n      }).catch(function(error) {\n        done();\n      });\n    });\n\n    it('should refresh the access token (internal / same instance)', function() {\n      var userConfig = util.getExplicitUserConfig([ 'identity' ], 'permanent');\n      var oauth = new OAuth(userConfig, request);\n      var url = oauth.getAuthUrl('foo');\n\n      return tsi.standardServer.allowAuthUrl(url).then(function(params) {\n        if (params.error) { throw new Error(params.error); }\n        var authorizationCode = params.code;\n        return oauth.auth(authorizationCode);\n      }).then(function(refreshToken) {\n        expect(typeof oauth.accessToken).to.equal('string');\n\n        var oldAccessToken = oauth.accessToken;\n\n        return oauth.refresh().then(function() {\n          expect(oauth.accsesToken).to.not.equal(oldAccessToken);\n        });\n      });\n    });\n\n    it('should refresh the access token (new instance)', function() {\n      var userConfig = util.getExplicitUserConfig([ 'identity' ], 'permanent');\n      var oauthA = new OAuth(userConfig, request);\n      var oauthB = new OAuth(userConfig, request);\n      var url = oauthA.getAuthUrl('foo');\n\n      return tsi.standardServer.allowAuthUrl(url).then(function(params) {\n        if (params.error) { throw new Error(params.error); }\n        var authorizationCode = params.code;\n\n        // Authenticate with the first instance. Get a refresh token.\n        return oauthA.auth(authorizationCode);\n      }).then(function(refreshToken) {\n        expect(oauthA.isAuthenticated()).to.equal(true);\n        expect(oauthA.hasRefreshToken()).to.equal(true);\n\n        // Use the refresh token to authenticate with the second\n        // fresh OAuth instance:\n        return oauthB.refresh(refreshToken);\n      }).then(function() {\n        expect(oauthB.isAuthenticated()).to.equal(true);\n        expect(oauthB.hasRefreshToken()).to.equal(true);\n      });\n    });\n\n  });\n\n  describe('deauth()', function() {\n    it('should auth (script), deauth, and not reauth', function() {\n      var userConfig = util.getScriptUserConfig();\n      var oauth = new OAuth(userConfig, request);\n      return oauth.auth().then(function(authData) {\n        expect(oauth.isAuthenticated()).to.equal(true);\n        return oauth.deauth();\n      }).then(function() {\n        expect(oauth.isAuthenticated()).to.equal(false);\n      });\n    });\n\n    it('should auth (explicit), deauth, and reauth with refresh token', function(done) {\n      var userConfig = util.getExplicitUserConfig([ 'identity' ], 'permanent');\n      var oauth = new OAuth(userConfig, request);\n      var url = oauth.getAuthUrl('foo');\n\n      return tsi.standardServer.allowAuthUrl(url).then(function(params) {\n        if (params.error) { throw new Error(params.error); }\n        var authorizationCode = params.code;\n        return oauth.auth(authorizationCode);\n      }).then(function(refreshToken) {\n\n        expect(oauth.isAuthenticated()).to.equal(true);\n        expect(oauth.hasRefreshToken()).to.equal(true);\n\n        return oauth.deauth().then(function() {\n          expect(oauth.isAuthenticated()).to.equal(false);\n          expect(oauth.hasRefreshToken()).to.equal(true);\n          return oauth.refresh();\n        }).then(function() {\n          expect(oauth.isAuthenticated()).to.equal(true);\n          expect(oauth.hasRefreshToken()).to.equal(true);\n          return oauth.deauth(refreshToken);\n        }).then(function() {\n          expect(oauth.isAuthenticated()).to.equal(false);\n          expect(oauth.hasRefreshToken()).to.equal(false);\n          // the refresh token should be invalid / can not\n          // use it any longer to renew\n          return oauth.refresh(refreshToken).then(function() {\n            done(new Error('should have errored'));\n          }).catch(function(error) {\n            done();\n          });\n        });\n      });\n\n    });\n  });\n\n});\n"],"sourceRoot":"/source/"}